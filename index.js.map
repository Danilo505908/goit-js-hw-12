{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst instance = axios.create({\n    baseURL: 'https://pixabay.com/api/',\n    params: {\n        key: '51756879-33acfcb6aa2bec76bd89378fe',\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n    },\n});\n\nexport async function getImagesByQuery(query, page) {\n    const response = await instance.get(\"\", {\n        params: { q: query, page },\n    })\n    return response.data;\n}\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox = new SimpleLightbox(\".gallery a\");\n\nexport function createGallery(images) {\n    const galleryElem = document.querySelector(\".gallery\");\n    const markup = images\n    .map(\n    (image) => `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img\n                class=\"gallery-image\"\n                src=\"${image.webformatURL}\"\n                alt=\"${image.tags}\"\n            />\n            <div class=\"gallery-box\">\n                <p>Likes <span>${image.likes}</span></p>\n                <p>Views <span>${image.views}</span></p>\n                <p>Comments <span>${image.comments}</span></p>\n                <p>Downloads <span>${image.downloads}</span></p>\n            </div>\n        </a>\n    </li>`\n    )\n    .join(\"\");\n\n    galleryElem.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    document.querySelector(\".gallery\").innerHTML = \"\";\n}\n\nexport function showLoader() {\n    document.querySelector(\".loader\").classList.remove(\"is-hidden\");\n}\n\nexport function hideLoader() {\n    document.querySelector(\".loader\").classList.add(\"is-hidden\");\n}\n\nexport function showLoadMoreButton() {\n    document.querySelector(\".load-more\").classList.remove(\"is-hidden\");\n}\n\nexport function hideLoadMoreButton() {\n    document.querySelector(\".load-more\").classList.add(\"is-hidden\");\n}\n","import { getImagesByQuery } from \"./js/pixabay-api\";\nimport {\n    clearGallery,\n    createGallery,\n    hideLoader,\n    showLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton,\n} from \"./js/render-functions\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst formElem = document.querySelector(\".form\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\n\nlet query = \"\";\nlet page = 1;\nlet totalHits = 0;\n\nformElem.addEventListener(\"submit\", async (e) => {\ne.preventDefault();\nquery = e.target.elements.searchText.value.trim();\n\nif (!query) return;\n\npage = 1;\nclearGallery();\nhideLoadMoreButton();\nshowLoader();\n\ntry {\n    const data = await getImagesByQuery(query, page);\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n    iziToast.error({\n        message:\n        \"Sorry, there are no images matching your search query. Please try again!\",\n    });\n    return;\n    }\n\n    createGallery(data.hits);\n    if (page * 15 < totalHits) {\n        showLoadMoreButton();\n    }\n} catch (error) {\n    iziToast.error({\n        message: \"An error occurred while fetching images. Please try again.\",\n    });\n} finally {\n    hideLoader();\n}\n    });\n\nloadMoreBtn.addEventListener(\"click\", async () => {\npage += 1;\nshowLoader();\nhideLoadMoreButton();\n\n    try {\n    const data = await getImagesByQuery(query, page);\n    createGallery(data.hits);\n\n    smoothScroll();\n\n    if (page * 15 >= totalHits) {\n        iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        hideLoadMoreButton();\n    } else {\n        showLoadMoreButton();\n    }\n} catch (error) {\n    iziToast.error({\n        message: \"An error occurred while fetching images. Please try again.\",\n    });\n} finally {\n    hideLoader();\n}\n    });\n\nfunction smoothScroll() {\n    const { height: cardHeight } = document\n    .querySelector(\".gallery\")\n    .firstElementChild.getBoundingClientRect();\n\nwindow.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\",\n    });\n}\n\n"],"names":["instance","axios","getImagesByQuery","query","page","lightbox","SimpleLightbox","createGallery","images","galleryElem","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","formElem","loadMoreBtn","totalHits","e","data","iziToast","smoothScroll","cardHeight"],"mappings":"owBAEA,MAAMA,EAAWC,EAAM,OAAO,CAC1B,QAAS,2BACT,OAAQ,CACJ,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,EACb,CACL,CAAC,EAEM,eAAeC,EAAiBC,EAAOC,EAAM,CAIhD,OAHiB,MAAMJ,EAAS,IAAI,GAAI,CACpC,OAAQ,CAAE,EAAGG,EAAO,KAAAC,CAAM,CAClC,CAAK,GACe,IACpB,CCfA,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAEvC,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAASF,EACd,IACAG,GAAU;AAAA;AAAA,4CAE6BA,EAAM,aAAa;AAAA;AAAA;AAAA,uBAGxCA,EAAM,YAAY;AAAA,uBAClBA,EAAM,IAAI;AAAA;AAAA;AAAA,iCAGAA,EAAM,KAAK;AAAA,iCACXA,EAAM,KAAK;AAAA,oCACRA,EAAM,QAAQ;AAAA,qCACbA,EAAM,SAAS;AAAA;AAAA;AAAA,UAI/C,EACA,KAAK,EAAE,EAERF,EAAY,mBAAmB,YAAaC,CAAM,EAClDL,EAAS,QAAO,CACpB,CAEO,SAASO,GAAe,CAC3B,SAAS,cAAc,UAAU,EAAE,UAAY,EACnD,CAEO,SAASC,GAAa,CACzB,SAAS,cAAc,SAAS,EAAE,UAAU,OAAO,WAAW,CAClE,CAEO,SAASC,GAAa,CACzB,SAAS,cAAc,SAAS,EAAE,UAAU,IAAI,WAAW,CAC/D,CAEO,SAASC,GAAqB,CACjC,SAAS,cAAc,YAAY,EAAE,UAAU,OAAO,WAAW,CACrE,CAEO,SAASC,GAAqB,CACjC,SAAS,cAAc,YAAY,EAAE,UAAU,IAAI,WAAW,CAClE,CCrCA,MAAMC,EAAW,SAAS,cAAc,OAAO,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIf,EAAQ,GACRC,EAAO,EACPe,EAAY,EAEhBF,EAAS,iBAAiB,SAAU,MAAOG,GAAM,CAIjD,GAHAA,EAAE,eAAc,EAChBjB,EAAQiB,EAAE,OAAO,SAAS,WAAW,MAAM,OAEvC,EAACjB,EAEL,CAAAC,EAAO,EACPQ,IACAI,IACAH,IAEA,GAAI,CACA,MAAMQ,EAAO,MAAMnB,EAAiBC,EAAOC,CAAI,EAG/C,GAFAe,EAAYE,EAAK,UAEbA,EAAK,KAAK,SAAW,EAAG,CAC5BC,EAAS,MAAM,CACX,QACA,0EACR,CAAK,EACD,MACC,CAEDf,EAAcc,EAAK,IAAI,EACnBjB,EAAO,GAAKe,GACZJ,GAER,MAAgB,CACZO,EAAS,MAAM,CACX,QAAS,4DACjB,CAAK,CACL,QAAU,CACNR,GACJ,EACA,CAAK,EAELI,EAAY,iBAAiB,QAAS,SAAY,CAClDd,GAAQ,EACRS,IACAG,IAEI,GAAI,CACJ,MAAMK,EAAO,MAAMnB,EAAiBC,EAAOC,CAAI,EAC/CG,EAAcc,EAAK,IAAI,EAEvBE,IAEInB,EAAO,IAAMe,GACbG,EAAS,KAAK,CACd,QAAS,4DACjB,CAAS,EACDN,KAEAD,GAER,MAAgB,CACZO,EAAS,MAAM,CACX,QAAS,4DACjB,CAAK,CACL,QAAU,CACNR,GACJ,CACA,CAAK,EAEL,SAASS,GAAe,CACpB,KAAM,CAAE,OAAQC,CAAU,EAAK,SAC9B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE5C,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QACd,CAAK,CACL"}